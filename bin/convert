#!/usr/bin/env php
<?php

namespace Convert;

use function \Converter\convert;
use Monad\Either;

require_once __DIR__ . '/../vendor/autoload.php';

$options = getopt("s:t:o");

if (!isset($options['s']) || !isset($options['t'])) {
    exit('missing parameters. usage convert -s input.file -t output.file [-o]' . PHP_EOL);
}

$result = convert($options['s'], $options['t'], array_key_exists('o', $options));

if($result instanceof Either\Left) {
    exit($result->extract());
}

exit(0);
